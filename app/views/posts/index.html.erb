<% provide(:account, "headerlinks") %>
<% provide(:messageboard, "headerlinksActive") %>
<% provide(:other, "headerlinks") %>

<script type = "text/javascript">

function showSubmit()
{
  if (document.getElementById('postArea').value == ""){
    $('#submitPost').slideUp();
    $('#submitPostHolder').slideDown();
  }
  else{
    $('#submitPost').slideDown();
    $('#submitPostHolder').slideUp();
  }

}

  $('#postArea').change(function(){ alert('Changed!'); })

  var previd = 0;

  function loadComments(id) {
    if (previd == 0) {
    document.getElementById(id).style.borderRight = "5px solid #DDD";
    document.getElementById(id).style.backgroundColor = "#F6F6F6";
     previd = id;
  }
  else {

    document.getElementById(previd).style.borderRight = "0";
    document.getElementById(previd).style.backgroundColor = "#FAFAFA";
    document.getElementById(id).style.borderRight = "5px solid #DDD";
    document.getElementById(id).style.backgroundColor = "#F6F6F6";

    previd = id;
  }


    $.ajax({
      url: "/retrieve_answers",
      type: "GET",
      data: 'id='+id,
      success: function(resp) {
        $("#answer-column").empty()
        $("#answer-column").append(resp)

      },

    })
  };


</script>

<div class = "container" >

<%= form_tag posts_path, :method => :get do %>
    <%= text_field_tag :search,  params[:search], :placeholder => "Search the message board" %>
    <input style = "height: 40px; width: auto; "type = "image"src = "./../assets/search.png" type="submit" value="Search">

<% end %>

  <div class = "postcreate-container">
    <!-- Form to create posts -->
   <%= form_for(:post, url: posts_path) do |f| %>
        <% @user = current_user %>

        <%= f.text_area :body, :placeholder => "Hey, #{@user.name}, post something", style: "height: 30px; width: 50%;", onkeyup: "showSubmit()", id: "postArea"%>

      <div style = "height: 35px;" class = "submitPost" id = "submitPost">
        <input class="btn btn-inverse btn-large", id = "submitButton" name="commit" type="submit" value="Post It!">
      </div>
      <div style = "height: 35px;" id = "submitPostHolder">
        <h5 class = "heading" style = "padding: 0px; margin: 0px; display: inline; vert"> You can post a question, a message or just whatever's on your mind </h5>
      </div>

      <br>

    <% end %>
  </div>
  <div class = "post-container">

  	<table>

  		<td style = "width: 470px; 	border-right: 1px solid #DDD; min-height:1000px;" id="post-container">
        <br>

        <%= render '/posts/post' %>

        <br>
        <br>

        <br>
        <br>


        <br>
        <br>

  		</td>
  		<td style = "width: 400px; vertical-align:top" id="answer-column">

        <!-- Comments/Replies to posts render here -->

      </td>

  	</table>

  </div>

</div>
